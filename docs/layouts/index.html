<!DOCTYPE html>
{{- /* Copyright 2026 Phillip Cloud */ -}}
{{- /* Licensed under the Apache License, Version 2.0 */ -}}
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>micasa &mdash; your house, in a terminal</title>
  <meta name="description" content="{{ site.Params.description }}">
  <link rel="icon" type="image/svg+xml" href="{{ "images/favicon.svg" | relURL }}">
  <link rel="preload" as="font" type="font/woff2" href="{{ "fonts/source-serif-4-latin.woff2" | relURL }}" crossorigin>
  <link rel="preload" as="font" type="font/woff2" href="{{ "fonts/dm-serif-display-latin-400.woff2" | relURL }}" crossorigin>
  <link rel="stylesheet" href="{{ "css/fonts.css" | relURL }}">
  <link rel="stylesheet" href="{{ "css/website.css" | relURL }}">
  <link rel="preload" as="image" type="image/webp" href="{{ "images/demo.webp" | relURL }}">
</head>
<body>

<!-- Hero -->
<header class="hero">
  <div class="container">
    <div class="hero-house-scene" id="house-scene">
      <div class="hero-house" id="hero-house" aria-hidden="true">&nbsp;&nbsp;&nbsp;&nbsp;&#x2584;&#x2593;&#x2584;<span class="chimney-anchor chimney">&#x2588;<span class="smoke-bed" id="smoke-bed" aria-hidden="true"></span></span>&nbsp;&nbsp;&nbsp;<br>&#x2584;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2584;<br>&#x2584;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2584;<br>&#x2588;&#x2588; &#x2591;&#x2591; &#x2591;&#x2591; &#x2588;&#x2588;<br>&#x2588;&#x2588; &nbsp;&#x2588;&#x2588;&#x2588;&#x2588; &#x2588;&#x2588;<br>&#x2588;&#x2588; &nbsp;&#x2588;&nbsp;&nbsp;&#x2588; &#x2588;&#x2588;<br>&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;</div>
      <div class="crumble-caption" id="crumble-caption">should've used micasa.</div>
    </div>
    <h1>micasa<span class="dot">.</span></h1>
    <p class="tagline">
      A terminal UI for tracking everything about your home.
      Single SQLite file. No cloud. No account. No subscriptions.
    </p>
    <div class="hero-cta">
      <a href="#install" class="btn-primary">Install</a>
      <a href="{{ "docs/" | relURL }}" class="btn-secondary">Docs</a>
      <a href="{{ "blog/" | relURL }}" class="btn-secondary">Blog</a>
    </div>
    <a class="hero-repo" href="https://github.com/cpcloud/micasa">github.com/cpcloud/micasa</a>
  </div>
</header>

<!-- Demo -->
<div class="container demo-container">
  <img src="{{ "images/demo.webp" | relURL }}" alt="micasa demo showing terminal UI" class="demo-gif" fetchpriority="high" decoding="async">
</div>

<!-- Pitch -->
<div class="container">
  <p class="pitch">
    Your house is quietly plotting to break while you sleep&mdash;and
    you&rsquo;re dreaming about redoing the kitchen.
  </p>
  <p class="pitch pitch-follow">
    <strong class="brand">micasa</strong> tracks maintenance, projects, incidents, appliances, vendors, quotes, and documents&mdash;all from your terminal.
  </p>
</div>

<!-- Features -->
<section id="features">
  <div class="container">
    <h2>Frequently <span class="typewriter accent" id="typewriter">asked</span> questions</h2>
    <div class="features-grid">

      <div class="feature">
        <p class="feature-q">When did I last change the furnace filter?</p>
        <p class="feature-a">Maintenance schedules, auto-computed due dates, full service history.</p>
      </div>

      <div class="feature">
        <p class="feature-q">What if we finally did the backyard?</p>
        <p class="feature-a">Projects from napkin sketch to completion&mdash;or graceful abandonment.</p>
      </div>

      <div class="feature">
        <p class="feature-q">How much would it actually cost to&hellip;</p>
        <p class="feature-a">Quotes side by side, vendor history, and the math you need to actually decide.</p>
      </div>

      <div class="feature">
        <p class="feature-q">Is the dishwasher still under warranty?</p>
        <p class="feature-a">Appliance tracking with purchase dates, warranty status, and maintenance history tied to each one.</p>
      </div>

      <div class="feature">
        <p class="feature-q">The basement is leaking again.</p>
        <p class="feature-a">Log incidents with severity and location, link them to appliances and vendors, and resolve them when fixed.</p>
      </div>

      <div class="feature">
        <p class="feature-q">Who did we use last time?</p>
        <p class="feature-a">A vendor directory with contact info, quote history, and every job they've done for you.</p>
      </div>

      <div class="feature">
        <p class="feature-q">Where&rsquo;s the warranty card?</p>
        <p class="feature-a">Attach files&mdash;manuals, invoices, photos&mdash;directly to projects and appliances. Stored in the same SQLite file.</p>
      </div>

    </div>
  </div>
</section>

<!-- Install -->
<section id="install">
  <div class="container">
    <h2>Get <span class="accent">started</span></h2>
    <div class="install-steps">
      <div>
        <p>Install with Go (1.25+):</p>
        <pre><code>go install github.com/cpcloud/micasa/cmd/micasa@latest</code></pre>
      </div>
      <p class="install-or">or grab a binary from the <a href="https://github.com/cpcloud/micasa/releases/latest">latest release</a></p>
      <p class="install-or">Linux, macOS, and Windows binaries are available for amd64 and arm64.</p>
      <div>
        <p>Try it in 30 seconds:</p>
        <pre><code>micasa --demo         # poke around with sample data
micasa                # start fresh with your own house
micasa --print-path   # show where the database lives</code></pre>
      </div>
    </div>
    <p class="install-data">Linux, macOS, Windows. One SQLite file, your machine. Back it up with <code>cp</code>.</p>
  </div>
</section>

<!-- Keybindings -->
<section id="keys">
  <div class="container">
    <h2>Keyboard <span class="accent">driven</span></h2>
    <p class="keys-pitch">Vim-style modal keys. <span class="mode-badge mode-normal">nav</span> to browse, <span class="mode-badge mode-edit">edit</span> to change things. Sort by any column, jump to columns with fuzzy search, hide what you don't need, drill into related records. The full list is in the <a href="{{ "docs/reference/keybindings/" | relURL }}">keybinding reference</a>.</p>
  </div>
</section>

<!-- Testimonials -->
<section id="testimonials">
  <div class="container">
    <h2>What <span class="accent">people</span> are saying</h2>
    <div class="testimonials-grid" id="testimonials-grid"></div>
  </div>
</section>

<!-- Origin -->
<section id="origin">
  <div class="container">
    <h2>Why <span class="accent">this</span> exists</h2>
    <p class="origin-quote">I built this because my home maintenance system was a shoebox of receipts and the vague feeling I was supposed to call someone about the roof.</p>
    <p class="origin-body"><strong class="brand">micasa</strong> replaces the shoebox, the binder you never open, and the sticky note on the fridge with one SQLite file and a terminal you already have open. Its modal, keyboard-driven interface is inspired by <a href="https://www.visidata.org/">VisiData</a>.</p>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container">
    <div class="footer-links">
      <a href="{{ "docs/" | relURL }}">Docs</a>
      <a href="{{ "blog/" | relURL }}">Blog</a>
      <a href="https://github.com/cpcloud/micasa">GitHub</a>
      <a href="https://github.com/cpcloud/micasa/releases">Changelog</a>
      <a href="https://github.com/cpcloud/micasa/releases/latest">Latest Release</a>
      <a href="https://github.com/cpcloud/micasa/blob/main/LICENSE">Apache-2.0</a>
    </div>
    <p>&copy; 2026 Phillip Cloud</p>
  </div>
</footer>

<script>
(function () {
  var el = document.getElementById('typewriter');
  var words = [
    { text: 'panicked',    cls: 'accent' },
    { text: 'daydreamed',  cls: 'accent-alt' },
    { text: 'avoided',        cls: 'accent' },
    { text: 'workshopped',  cls: 'accent-alt' },
    { text: 'entertained', cls: 'accent-alt' }
  ];
  var i = 0;
  var TYPE = 100, DELETE = 60, PAUSE = 2800, GAP = 500;

  var reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduced) return;

  function type(word, cb) {
    var j = 0;
    el.className = 'typewriter ' + word.cls;
    (function next() {
      el.textContent = word.text.slice(0, ++j);
      if (j < word.text.length) setTimeout(next, TYPE);
      else setTimeout(cb, PAUSE);
    })();
  }

  function erase(cb) {
    var text = el.textContent;
    (function next() {
      text = text.slice(0, -1);
      el.textContent = text;
      if (text.length > 0) setTimeout(next, DELETE);
      else setTimeout(cb, GAP);
    })();
  }

  function cycle() {
    type(words[i], function () {
      erase(function () {
        i = (i + 1) % words.length;
        cycle();
      });
    });
  }

  setTimeout(function () {
    erase(function () {
      i = 1;
      cycle();
    });
  }, PAUSE);
})();
</script>

<script>
(function () {
  var scene = document.getElementById('house-scene');
  var house = document.getElementById('hero-house');
  var caption = document.getElementById('crumble-caption');
  if (!scene || !house) return;
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

  var GRAVITY       = 1400;
  var RESTITUTION   = 0.3;
  var BOUNCE_DRAG   = 0.5;
  var MAX_BOUNCES   = 3;
  var BLAST_SPEED   = 350;
  var STAGGER_SEC   = 0.25;
  var SETTLE_FADE   = 0.3;

  var ROW_DELAY_MS      = 100;
  var FLIGHT_SEC        = 0.6;
  var DISSOLVE_MS       = 200;
  var REBUILD_EASING    = 'cubic-bezier(0.0, 0.0, 0.2, 1.0)';

  var EMBER_BASE     = '#a04e30';
  var EMBER_COLORS   = ['#e07040', '#d4783c', '#c05e3c'];
  var EMBER_CHANCE   = 0.15;
  var SMOKE_GLYPHS   = ['\u2591', '\u2591', '\u2592', '\u2592', '\u2593'];
  var MAX_RUBBLE_SMOKE = 10;

  var animating = false;
  var destroyed = false;
  var rubbleEls = [];
  var originalHTML = house.innerHTML;

  var emberTimer = 0;
  var rubbleSmokeAnimId = 0;
  var rubbleSmokeSpawnTimer = 0;
  var rubbleSmokeParticles = [];

  function rand(lo, hi) { return lo + Math.random() * (hi - lo); }

  function dist(ax, ay, bx, by) {
    var dx = ax - bx, dy = ay - by;
    return Math.sqrt(dx * dx + dy * dy);
  }

  var BLOCK_RE = /[\u2580-\u259F]/;
  function wrapBlockChars(root) {
    var spans = [];
    var row = 0;

    function walk(node) {
      if (node.nodeType === 3) {
        var text = node.textContent;
        if (!text) return;
        var frag = document.createDocumentFragment();
        for (var i = 0; i < text.length; i++) {
          if (BLOCK_RE.test(text[i])) {
            var s = document.createElement('span');
            s.textContent = text[i];
            s._row = row;
            frag.appendChild(s);
            spans.push(s);
          } else {
            frag.appendChild(document.createTextNode(text[i]));
          }
        }
        node.parentNode.replaceChild(frag, node);
      } else if (node.nodeType === 1) {
        if (node.tagName === 'BR') { row++; return; }
        if (node.style && node.style.display === 'none') return;
        var kids = [].slice.call(node.childNodes);
        for (var j = 0; j < kids.length; j++) walk(kids[j]);
      }
    }

    var kids = [].slice.call(root.childNodes);
    for (var i = 0; i < kids.length; i++) walk(kids[i]);
    return spans;
  }

  function measureAndHide(sceneRect) {
    var spans = wrapBlockChars(house);
    var blocks = [];
    var groundY = 0;
    for (var i = 0; i < spans.length; i++) {
      var r = spans[i].getBoundingClientRect();
      var b = {
        ch: spans[i].textContent,
        x: r.left - sceneRect.left,
        y: r.top - sceneRect.top,
        row: spans[i]._row
      };
      if (b.y > groundY) groundY = b.y;
      blocks.push(b);
    }
    house.innerHTML = originalHTML;
    house.style.visibility = 'hidden';
    return { blocks: blocks, groundY: groundY };
  }

  function scatterSmoke(smokeBed, sceneRect, clickX, clickY) {
    var scattered = [];
    if (!smokeBed) return scattered;

    var els = smokeBed.querySelectorAll('.smoke-particle');
    for (var i = 0; i < els.length; i++) {
      var r = els[i].getBoundingClientRect();
      var sx = r.left - sceneRect.left;
      var sy = r.top - sceneRect.top;
      var alpha = parseFloat(els[i].style.opacity) || 0;
      if (alpha < 0.05) continue;

      var clone = document.createElement('span');
      clone.className = 'smoke-particle';
      clone.textContent = els[i].textContent;
      clone.style.position = 'absolute';
      clone.style.left = sx + 'px';
      clone.style.top = sy + 'px';
      clone.style.opacity = String(alpha);
      clone.style.fontSize = '0.9rem';
      clone.style.transform = 'none';
      scene.appendChild(clone);

      var d = dist(sx, sy, clickX, clickY) || 1;
      var speed = rand(200, 350);
      scattered.push({
        el: clone, x: 0, y: 0,
        vx: ((sx - clickX) / d) * speed + rand(-40, 40),
        vy: ((sy - clickY) / d) * speed - rand(0, 100),
        startAlpha: alpha,
        maxLife: rand(0.4, 0.7),
        age: 0
      });
    }
    smokeBed.style.display = 'none';
    return scattered;
  }

  function createBlockEls(blocks) {
    var items = [];
    for (var i = 0; i < blocks.length; i++) {
      var el = document.createElement('span');
      el.className = 'crumble-block';
      el.textContent = blocks[i].ch;
      el.style.left = blocks[i].x + 'px';
      el.style.top = blocks[i].y + 'px';
      scene.appendChild(el);
      items.push({
        el: el, b: blocks[i],
        x: 0, y: 0, angle: 0,
        vx: 0, vy: 0, va: 0,
        active: false, settled: false, bounces: 0
      });
    }
    return items;
  }

  function blockDistances(items, clickX, clickY) {
    var dists = [];
    var max = 0;
    for (var i = 0; i < items.length; i++) {
      var d = dist(items[i].b.x, items[i].b.y, clickX, clickY);
      dists.push(d);
      if (d > max) max = d;
    }
    return { dists: dists, max: max };
  }

  function initBlastVelocity(item, clickX, clickY, d, blastRadius) {
    var proximity = 1 - Math.min(d / blastRadius, 1);
    var force = 0.3 + proximity * 0.7;
    var len = Math.max(d, 1);
    var nx = (item.b.x - clickX) / len;
    var ny = (item.b.y - clickY) / len;
    var speed = BLAST_SPEED * force;
    item.vx = nx * speed + rand(-50, 50);
    item.vy = ny * speed - rand(0, 300) * force;
    item.va = rand(-450, 450) * force;
    item.active = true;
  }

  function stepBlock(item, dt, groundY) {
    if (item.settled) return false;
    item.vy += GRAVITY * dt;
    item.x += item.vx * dt;
    item.y += item.vy * dt;
    item.angle += item.va * dt;

    if (item.b.y + item.y >= groundY) {
      item.y = groundY - item.b.y;
      if (Math.abs(item.vy) < 50 || item.bounces >= MAX_BOUNCES) {
        item.settled = true;
      } else {
        item.vy = -Math.abs(item.vy) * RESTITUTION;
        item.vx *= BOUNCE_DRAG;
        item.va *= 0.3;
        item.bounces++;
      }
    }
    return !item.settled;
  }

  function stepScatteredSmoke(sp, dt) {
    sp.age += dt;
    if (sp.age >= sp.maxLife) { sp.el.remove(); return false; }
    sp.x += sp.vx * dt;
    sp.y += sp.vy * dt;
    sp.vx *= (1 - 1.5 * dt);
    sp.vy *= (1 - 1.5 * dt);
    var fade = 1 - sp.age / sp.maxLife;
    sp.el.style.transform = 'translate(' + sp.x.toFixed(1) + 'px,' + sp.y.toFixed(1) + 'px)';
    sp.el.style.opacity = (sp.startAlpha * fade).toFixed(2);
    return true;
  }

  function startSmolder(houseRect, groundY) {
    for (var i = 0; i < rubbleEls.length; i++) {
      rubbleEls[i].el.style.transition = 'opacity 0.8s, color 0.8s';
      rubbleEls[i].el.style.opacity = '0.5';
      rubbleEls[i].el.style.color = EMBER_BASE;
    }

    emberTimer = setInterval(function () {
      for (var i = 0; i < rubbleEls.length; i++) {
        if (Math.random() < EMBER_CHANCE) {
          var el = rubbleEls[i].el;
          el.style.color = EMBER_COLORS[Math.floor(Math.random() * EMBER_COLORS.length)];
          el.style.opacity = rand(0.5, 0.9).toFixed(2);
          setTimeout((function (ref) {
            return function () { ref.style.color = EMBER_BASE; ref.style.opacity = '0.35'; };
          })(el), rand(200, 700));
        }
      }
    }, 100);

    var centerX = houseRect.width / 2;
    rubbleSmokeSpawnTimer = setInterval(function () {
      if (rubbleSmokeParticles.length >= MAX_RUBBLE_SMOKE) return;
      var el = document.createElement('span');
      el.className = 'smoke-particle';
      el.textContent = SMOKE_GLYPHS[Math.floor(Math.random() * SMOKE_GLYPHS.length)];
      el.style.position = 'absolute';
      el.style.left = (centerX + rand(-0.6, 0.6) * houseRect.width) + 'px';
      el.style.top = groundY + 'px';
      el.style.color = '#9e958a';
      el.style.fontSize = rand(0.6, 1.0) + 'em';
      el.style.opacity = '0';
      scene.appendChild(el);
      rubbleSmokeParticles.push({
        el: el, age: 0,
        lifetime: rand(2000, 5000),
        drift: rand(-25, 25),
        rise: rand(40, 80)
      });
    }, 250);

    var lastT = 0;
    function tickSmoke(now) {
      if (!lastT) lastT = now;
      var dt = Math.min((now - lastT) / 1000, 0.1);
      lastT = now;
      for (var i = rubbleSmokeParticles.length - 1; i >= 0; i--) {
        var p = rubbleSmokeParticles[i];
        p.age += dt * 1000;
        var t = p.age / p.lifetime;
        if (t >= 1) { p.el.remove(); rubbleSmokeParticles.splice(i, 1); continue; }
        var alpha = t < 0.15 ? (t / 0.15) * 0.4 : 0.4 * (1 - (t - 0.15) / 0.85);
        p.el.style.transform = 'translate(' + (p.drift * t).toFixed(1) + 'px, -' + (p.rise * t).toFixed(1) + 'px)';
        p.el.style.opacity = alpha.toFixed(3);
      }
      rubbleSmokeAnimId = requestAnimationFrame(tickSmoke);
    }
    rubbleSmokeAnimId = requestAnimationFrame(tickSmoke);
  }

  function stopSmolder() {
    clearInterval(emberTimer);    emberTimer = 0;
    clearInterval(rubbleSmokeSpawnTimer); rubbleSmokeSpawnTimer = 0;
    cancelAnimationFrame(rubbleSmokeAnimId); rubbleSmokeAnimId = 0;
    for (var i = 0; i < rubbleSmokeParticles.length; i++) rubbleSmokeParticles[i].el.remove();
    rubbleSmokeParticles = [];
  }

  function destroyHouse(evt) {
    animating = true;

    var sceneRect = scene.getBoundingClientRect();
    var houseRect = house.getBoundingClientRect();
    var clickX = evt.clientX - sceneRect.left;
    var clickY = evt.clientY - sceneRect.top;

    var scattered = scatterSmoke(document.getElementById('smoke-bed'), sceneRect, clickX, clickY);
    var measured = measureAndHide(sceneRect);
    var items = createBlockEls(measured.blocks);
    var bd = blockDistances(items, clickX, clickY);
    var blastRadius = Math.sqrt(houseRect.width * houseRect.width + houseRect.height * houseRect.height);

    var started = performance.now();
    var lastTime = started;

    function tick(now) {
      var dt = Math.min((now - lastTime) / 1000, 0.05);
      lastTime = now;
      var elapsed = (now - started) / 1000;
      var allDone = true;

      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        if (item.settled) continue;

        var delay = (bd.max > 0 ? bd.dists[i] / bd.max : 0) * STAGGER_SEC;
        if (elapsed < delay) { allDone = false; continue; }

        if (!item.active) initBlastVelocity(item, clickX, clickY, bd.dists[i], blastRadius);
        if (stepBlock(item, dt, measured.groundY)) allDone = false;

        var alpha = Math.max(0.4, 1 - (elapsed - delay) * SETTLE_FADE);
        item.el.style.transform =
          'translate(' + item.x.toFixed(1) + 'px,' + item.y.toFixed(1) + 'px) rotate(' + item.angle.toFixed(0) + 'deg)';
        item.el.style.opacity = alpha.toFixed(2);
      }

      for (var j = scattered.length - 1; j >= 0; j--) {
        if (!stepScatteredSmoke(scattered[j], dt)) scattered.splice(j, 1);
      }

      if (!allDone || scattered.length > 0) {
        requestAnimationFrame(tick);
        return;
      }

      setTimeout(function () {
        rubbleEls = items;
        startSmolder(houseRect, measured.groundY);

        var onClick = function (e) { e.stopPropagation(); if (!animating && destroyed) rebuildHouse(); };
        for (var i = 0; i < items.length; i++) items[i].el.addEventListener('click', onClick);

        if (caption) caption.classList.add('visible');
        destroyed = true;
        animating = false;
      }, 200);
    }

    requestAnimationFrame(tick);
  }

  function rebuildHouse() {
    animating = true;
    stopSmolder();
    if (caption) caption.classList.remove('visible');

    var maxRow = 0;
    for (var i = 0; i < rubbleEls.length; i++) {
      if (rubbleEls[i].b.row > maxRow) maxRow = rubbleEls[i].b.row;
    }

    for (var i = 0; i < rubbleEls.length; i++) {
      var delay = (maxRow - rubbleEls[i].b.row) * ROW_DELAY_MS;
      rubbleEls[i].el.style.transition =
        'transform ' + FLIGHT_SEC + 's ' + REBUILD_EASING + ' ' + delay + 'ms, ' +
        'opacity 0.3s ease ' + delay + 'ms, color 0.3s ease ' + delay + 'ms';
      rubbleEls[i].el.style.opacity = '1';
      rubbleEls[i].el.style.color = '';
      rubbleEls[i].el.style.transform = 'translate(0,0) rotate(0deg)';
    }

    var flightEnd = maxRow * ROW_DELAY_MS + FLIGHT_SEC * 1000 + 50;

    setTimeout(function () {
      house.innerHTML = originalHTML;
      house.style.visibility = 'visible';
      house.style.opacity = '1';
      house.style.transition = 'none';
      var bed = document.getElementById('smoke-bed');
      if (bed) bed.style.display = 'none';
      void house.offsetHeight;

      for (var i = 0; i < rubbleEls.length; i++) {
        rubbleEls[i].el.style.transition = 'opacity ' + DISSOLVE_MS + 'ms ease';
        rubbleEls[i].el.style.opacity = '0';
      }

      setTimeout(function () {
        for (var i = 0; i < rubbleEls.length; i++) rubbleEls[i].el.remove();
        rubbleEls = [];
        var bed = document.getElementById('smoke-bed');
        if (bed) bed.style.display = '';
        destroyed = false;
        animating = false;
      }, DISSOLVE_MS + 50);
    }, flightEnd);
  }

  scene.addEventListener('click', function (evt) {
    if (animating) return;
    if (destroyed) rebuildHouse(); else destroyHouse(evt);
  });
})();
</script>

<script>
(function () {
  if (!document.getElementById('smoke-bed')) return;
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

  var glyphs = ['\u2591', '\u2591', '\u2591', '\u2592'];
  var particles = [];
  var MAX_PARTICLES = 5;

  function rand(lo, hi) { return lo + Math.random() * (hi - lo); }

  function spawn() {
    var bed = document.getElementById('smoke-bed');
    if (bed && particles.length < MAX_PARTICLES) {
      var el = document.createElement('span');
      el.className = 'smoke-particle';
      el.textContent = glyphs[Math.floor(Math.random() * glyphs.length)];
      bed.appendChild(el);

      particles.push({
        el: el,
        age: 0,
        lifetime: rand(3000, 5000),
        x0: rand(-0.2, 0.2),
        amp1: rand(0.15, 0.4),
        freq1: rand(0.8, 1.6),
        phase1: rand(0, Math.PI * 2),
        amp2: rand(0.05, 0.12),
        freq2: rand(2.5, 4.0),
        phase2: rand(0, Math.PI * 2),
        rise: rand(0.8, 1.4),
        drift: rand(-0.05, 0.3),
        scaleEnd: rand(1.2, 1.6),
        peakAlpha: rand(0.7, 0.9)
      });
    }

    setTimeout(spawn, rand(800, 1500));
  }

  var last = 0;
  function tick(now) {
    if (!last) last = now;
    var dt = Math.min((now - last) / 1000, 0.1);
    last = now;

    for (var i = particles.length - 1; i >= 0; i--) {
      var p = particles[i];
      p.age += dt * 1000;
      var t = p.age / p.lifetime;

      if (t >= 1) {
        p.el.remove();
        particles.splice(i, 1);
        continue;
      }

      var y = p.rise * (p.age / 1000);
      var wobble1 = Math.sin(p.freq1 * t * Math.PI * 2 + p.phase1) * p.amp1;
      var wobble2 = Math.sin(p.freq2 * t * Math.PI * 2 + p.phase2) * p.amp2;
      var x = p.x0 + (wobble1 + wobble2) * t + p.drift * t;
      var scale = 1 + (p.scaleEnd - 1) * t;
      var alpha;
      if (t < 0.12) {
        alpha = (t / 0.12) * p.peakAlpha;
      } else {
        alpha = p.peakAlpha * (1 - (t - 0.12) / 0.88);
      }

      p.el.style.transform =
        'translate(' + x.toFixed(2) + 'em, -' + y.toFixed(2) + 'em) scale(' + scale.toFixed(2) + ')';
      p.el.style.opacity = alpha.toFixed(3);
    }

    requestAnimationFrame(tick);
  }

  spawn();
  requestAnimationFrame(tick);
})();
</script>

<script>
(function () {
  var all = [
    {
      text: 'My partner asked why I was typing in a terminal at midnight. I said \u201cthe water heater warranty expires in eleven days.\u201d She said \u201cwe rent.\u201d',
      cite: 'Anonymous'
    },
    {
      text: 'A client pulled out a laptop and showed me a sorted maintenance log going back three years. I have been a plumber for twenty years and I have never felt so unprepared for a house call.',
      cite: 'A Plumber, Allegedly'
    },
    {
      text: 'I was going to use a spreadsheet like a normal person. Then I was going to use Notion like a normal person. Then I installed a TUI from GitHub at 2am. I am no longer a normal person.',
      cite: 'Hacker News Commenter, Almost Certainly'
    },
    {
      text: 'I can tell you the exact date I last cleaned the gutters, which filter is in the furnace, and what I paid the electrician in 2024. Nobody has ever asked me for any of this. I am ready.',
      cite: 'Overqualified Homeowner'
    },
    {
      text: 'My wife asked if I\u2019d called the roofer. I pulled up a timestamped service log, a quote comparison, and a vendor contact sheet. She said \u201cso\u2026 no?\u201d',
      cite: 'Local Dad'
    },
    {
      text: 'Finally replaced the sticky note on the fridge. It said \u201ccall roofer.\u201d It had been there since we moved in. The roofer has retired.',
      cite: 'Suburban Archaeologist'
    },
    {
      text: 'It\u2019s like having a filing cabinet except it\u2019s one file and I understand what\u2019s in it.',
      cite: 'Reluctant Convert'
    },
    {
      text: 'Found out the dishwasher was still under warranty three days before it expired. The app paid for itself. It was free.',
      cite: 'Frugal Victor'
    },
    {
      text: 'I\u2019ve been using the demo data for three weeks. I don\u2019t own a house.',
      cite: 'Aspiring Homeowner'
    },
    {
      text: 'My friend said \u201cyou should try this app for your house\u201d and then sent me a GitHub link. We are no longer friends. I am, however, extremely organized.',
      cite: 'Reluctant Early Adopter'
    },
    {
      text: 'My realtor asked how I knew the exact date the previous owner replaced the sump pump. I said \u201cSQLite.\u201d She stopped returning my calls.',
      cite: 'Due Diligence Enthusiast'
    },
    {
      text: 'The homeowner handed me a printed quote comparison. With dates. And vendor ratings. In a monospaced font. I need to lie down.',
      cite: 'A Contractor Who Has Seen Things'
    },
    {
      text: 'My house is still falling apart. But now I have a database about it, and somehow that feels like progress.',
      cite: 'Optimistic Realist'
    },
    {
      text: 'I showed my neighbor my appliance warranty tracker. He showed me his junk drawer. We both think the other one is insane.',
      cite: 'Suburban Standoff'
    },
    {
      text: 'cp micasa.db backup.db. That\u2019s my entire backup strategy. I sleep like a baby.',
      cite: 'Minimalist Sysadmin'
    },
    {
      text: 'The HVAC guy asked when the filter was last changed. I gave him a date. He looked at me like I was a wizard. I am not a wizard. I am a man with a terminal.',
      cite: 'Filter Wizard'
    },
    {
      text: 'I added my house to micasa and immediately discovered I was six months late on gutter cleaning. Ignorance really was bliss.',
      cite: 'Recently Informed'
    },
    {
      text: 'I used to keep track of home repairs in my head. My head is not a database. My head was wrong about the roof.',
      cite: 'Former Optimist'
    },
    {
      text: 'Showed my partner the vendor history and she said \u201cwhy do we have four different plumbers.\u201d I did not have a good answer but at least now we have the data to discuss it.',
      cite: 'Data-Driven Argument Starter'
    }
  ];

  var SHOW = 4;
  for (var i = all.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = all[i]; all[i] = all[j]; all[j] = tmp;
  }
  var pick = all.slice(0, SHOW);

  var grid = document.getElementById('testimonials-grid');
  if (!grid) return;
  for (var k = 0; k < pick.length; k++) {
    var bq = document.createElement('blockquote');
    bq.className = 'testimonial';
    var p = document.createElement('p');
    p.textContent = pick[k].text;
    var cite = document.createElement('cite');
    cite.textContent = '\u2014 ' + pick[k].cite;
    bq.appendChild(p);
    bq.appendChild(cite);
    grid.appendChild(bq);
  }

  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
  var items = grid.querySelectorAll('.testimonial');
  var STAGGER = 150;
  var revealed = false;
  var observer = new IntersectionObserver(function (entries) {
    if (revealed) return;
    for (var e = 0; e < entries.length; e++) {
      if (entries[e].isIntersecting) {
        revealed = true;
        for (var n = 0; n < items.length; n++) {
          (function (el, delay) {
            setTimeout(function () { el.classList.add('visible'); }, delay);
          })(items[n], n * STAGGER);
        }
        observer.disconnect();
        break;
      }
    }
  }, { threshold: 0.15 });
  observer.observe(grid);
})();
</script>
</body>
</html>
