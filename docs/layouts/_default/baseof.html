<!DOCTYPE html>
<!-- Copyright 2026 Phillip Cloud -->
<!-- Licensed under the Apache License, Version 2.0 -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ .Title }} &mdash; micasa</title>
  <meta name="description" content="{{ with .Params.description }}{{ . }}{{ else }}{{ site.Params.description }}{{ end }}">
  <link rel="icon" type="image/svg+xml" href="/images/favicon.svg">
  <link rel="preload" as="font" type="font/woff2" href="{{ "fonts/source-serif-4-latin.woff2" | relURL }}" crossorigin>
  <link rel="preload" as="font" type="font/woff2" href="{{ "fonts/dm-serif-display-latin-400.woff2" | relURL }}" crossorigin>
  <link rel="stylesheet" href="{{ "css/docs.css" | relURL }}">
  <link rel="stylesheet" href="/pagefind/pagefind-ui.css">
  <script type="importmap">
  {
    "imports": {
      "mermaid": "https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.esm.min.mjs"
    },
    "integrity": {
      "https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.esm.min.mjs": "sha384-bBdf+Hx1qc+N2a4poQjInyeO803gqSNqanHQiQ3DgvXaz/aeQz4mQLhIXpK9MP83"
    }
  }
  </script>
</head>
<body>

<div class="docs-topbar">
  <button class="menu-toggle" onclick="document.querySelector('.docs-sidebar').classList.toggle('open')" aria-label="Toggle menu">&#9776;</button>
  <a href="{{ site.Home.RelPermalink }}">micasa</a>
  <nav class="docs-topbar-nav">
    <a href="{{ "blog/" | relURL }}">Blog</a>
    <a href="https://github.com/cpcloud/micasa">GitHub</a>
  </nav>
</div>

<div class="search-overlay" id="search-overlay">
  <div class="search-modal" id="search-modal">
    <div id="search"></div>
  </div>
</div>

<div class="docs-layout">
  {{ partial "sidebar.html" . }}

  <main class="docs-main">
    {{ block "main" . }}{{ end }}

    {{ partial "pager.html" . }}

    <div class="docs-footer">
      <a href="/">micasa.dev</a> &middot;
      <a href="{{ "blog/" | relURL }}">Blog</a> &middot;
      <a href="https://github.com/cpcloud/micasa">GitHub</a> &middot;
      <a href="https://github.com/cpcloud/micasa/blob/main/LICENSE">Apache-2.0</a>
    </div>
  </main>
</div>

<script>
// Close sidebar when clicking outside on mobile
document.addEventListener('click', function(e) {
  var sidebar = document.querySelector('.docs-sidebar');
  var toggle = document.querySelector('.menu-toggle');
  if (sidebar.classList.contains('open') && !sidebar.contains(e.target) && !toggle.contains(e.target)) {
    sidebar.classList.remove('open');
  }
});
</script>

<script src="/pagefind/pagefind-ui.js"></script>
<script>
(function() {
  var overlay = document.getElementById('search-overlay');
  var modal = document.getElementById('search-modal');
  var initialized = false;
  var input;

  function open() {
    if (!initialized) {
      new PagefindUI({ element: '#search', showSubResults: true, showImages: false });
      input = document.querySelector('.pagefind-ui__search-input');
      initialized = true;
    }
    overlay.classList.add('open');
    input.focus();
  }

  function close() {
    overlay.classList.remove('open');
  }

  document.addEventListener('keydown', function(e) {
    if (e.key === '/' && !overlay.classList.contains('open')) {
      var tag = (e.target.tagName || '').toLowerCase();
      if (tag === 'input' || tag === 'textarea' || e.target.isContentEditable) return;
      e.preventDefault();
      open();
    }
    if (e.key === 'Escape' && overlay.classList.contains('open')) {
      close();
    }
  });

  overlay.addEventListener('click', function(e) {
    if (!modal.contains(e.target)) close();
  });
})();
</script>

<script type="module">
import mermaid from 'mermaid';
mermaid.initialize({
  startOnLoad: true,
  theme: 'base',
  themeVariables: {
    fontFamily: '"Source Serif 4", Georgia, serif',
    fontSize: '14px',
    primaryColor: '#f0ebe4',
    primaryBorderColor: '#c05e3c',
    primaryTextColor: '#2d2a26',
    lineColor: '#9e958a',
    secondaryColor: '#faf6f1',
    tertiaryColor: '#faf6f1'
  }
});
</script>

</body>
</html>
